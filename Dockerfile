# 1. Базовый образ с Python
# Начинаем с официального, легковесного образа. Это как чистая операционная система с уже установленным Python.
FROM python:3.11-slim

# 2. Установка рабочей директории
# Создаем папку /app внутри контейнера, где будет лежать наш код.
WORKDIR /app

# 3. Установка зависимостей
# Копируем сначала ТОЛЬКО файл с зависимостями. Docker кэширует этот шаг,
# и если файл не меняется, зависимости не будут переустанавливаться при каждой сборке.
COPY requirements.txt .

# Выполняем установку библиотек из файла.
RUN pip install --no-cache-dir -r requirements.txt

# 4. Копирование кода
# Теперь копируем все остальные файлы (main.py и .env) в папку /app внутри контейнера.
COPY . .

# 5. Команда для запуска
# Указываем Docker, какую команду нужно выполнить, когда контейнер запустится.
# Это то же самое, что написать "python main.py" в терминале.
CMD ["python", "main.py"]